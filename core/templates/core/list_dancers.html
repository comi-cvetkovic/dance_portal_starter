{% extends 'core/base.html' %}
{% load i18n %}
{% block title %}{% trans "Dancers | Dance Portal" %}{% endblock %}

{% block content %}

<!-- Header -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">
    {% if is_superuser %}
      {% trans "Dancers for" %} {{ club.club_name }}
    {% else %}
      {% trans "Your Dancers" %}
    {% endif %}
  </h2>

  <div class="d-flex align-items-center gap-2">
    <span class="badge text-bg-light border">
      <strong>{% trans "Total Dancers" %}:</strong> {{ dancers|length }}
    </span>

    {% if is_superuser %}
      <form method="get" action="{% url 'admin_add_dancer' club.id %}">
        <button type="submit" class="btn btn-coral">
          + {% trans "Add Dancer" %}
        </button>
      </form>
    {% else %}
      <form method="get" action="{% url 'add_dancer' %}">
        <button type="submit" class="btn btn-coral">
          + {% trans "Add Dancer" %}
        </button>
      </form>
    {% endif %}
  </div>
</div>

<!-- List -->
{% if dancers %}
  <div class="dp-card">
    <div class="list-group list-group-flush">
      {% for dancer in dancers %}
        <div class="list-group-item d-flex flex-wrap justify-content-between align-items-center gap-2">
          <div class="d-flex flex-column">
            <span class="fw-semibold">{{ dancer.first_name }} {{ dancer.last_name }}</span>
            <span class="text-muted small">
              {% trans "Date of birth" %}: {{ dancer.date_of_birth }}
            </span>
          </div>

          <div class="d-flex gap-2">
            <form method="get" action="{% url 'edit_dancer' dancer.id %}">
              <button type="submit" class="btn btn-coral-outline btn-sm">
                {% trans "Edit" %}
              </button>
            </form>

            {% if is_superuser %}
              <form method="get" action="{% url 'delete_dancer_by_club' club.id dancer.id %}">
                <button type="submit" class="btn btn-outline-danger btn-sm"
                        onclick="return confirm('Delete this dancer?');">
                  {% trans "Delete" %}
                </button>
              </form>
            {% else %}
              <form method="get" action="{% url 'delete_dancer' dancer.id %}">
                <button type="submit" class="btn btn-outline-danger btn-sm"
                        onclick="return confirm('Delete this dancer?');">
                  {% trans "Delete" %}
                </button>
              </form>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% else %}
  <div class="alert alert-light border mb-0">
    {% trans "No dancers yet" %}.
  </div>
{% endif %}

{% endblock %}

{% block extra_head %}
<style>
  /* Unified card shell */
  .dp-card{
    background:#fff;
    border:1px solid #eee;
    border-radius:14px;
    box-shadow:0 2px 10px rgba(0,0,0,.05);
    overflow:hidden;
  }
  .list-group-item{
    padding:.85rem 1rem;
  }

  /* Zebra striping for dancer rows */
  .list-group-striped .list-group-item:nth-child(even){
    background-color:#f8f9fa; /* light gray */
  }
  .list-group-striped .list-group-item:nth-child(odd){
    background-color:#ffffff;
  }
</style>
{% endblock %}
