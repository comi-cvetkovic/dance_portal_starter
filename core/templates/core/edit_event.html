{% extends 'core/base.html' %}
{% load i18n %}
{% block title %}{% trans "Manage Event" %} | {{ event.name }}{% endblock %}

{% block content %}
<h2>{% trans "Manage Event:" %} {{ event.name }}</h2>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <p>
        <label for="id_name">{% trans "Event Name" %}:</label><br>
        {{ form.name }}
    </p>

    <p>
        <label for="id_location">{% trans "Location" %}:</label><br>
        {{ form.location }}
    </p>

    <p>
        <label for="id_city">{% trans "City" %}:</label><br>
        {{ form.city }}
    </p>

    <p>
        <label for="id_date">{% trans "Date" %}:</label><br>
        {{ form.date }}
    </p>

    <p>
        <label for="id_start_time">{% trans "Start Time (optional)" %}:</label><br>
        {{ form.start_time }}
    </p>

    <p>
        <label for="id_notice_image">{% trans "Event Poster / Notice (optional)" %}:</label><br>
        {{ form.notice_image }}
        {% if event.notice_image %}
            <br>
            <img src="{{ event.notice_image.url }}" alt="Poster"
                 style="max-height:150px; margin-top:8px; border:1px solid #ccc; border-radius:6px;">
        {% endif %}
    </p>

    <p>
        <label for="id_is_published">{{ form.is_published }} {% trans "Publish Event" %}</label>
    </p>

    <button type="submit" class="btn-green">{% trans "Save Changes" %}</button>
</form>

<hr style="margin: 2em 0;">

<form method="post" action="{% url 'delete_event' event.id %}"
      onsubmit="return confirm('{% blocktrans %}Are you sure you want to delete this event? All participations, styles, and scores will be removed.{% endblocktrans %}');">
    {% csrf_token %}
    <button type="submit" class="btn-delete">{% trans "Delete Event" %}</button>
</form>

<form method="get" action="{% url 'event_list' %}" style="margin-top: 1em;">
    <button type="submit" class="btn-default">{% trans "Back to Events" %}</button>
</form>
{% endblock %}



