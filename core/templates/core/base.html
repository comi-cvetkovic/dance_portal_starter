{% load i18n %}
{% load static %}
<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% trans "Dance Portal" %}{% endblock %}</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

<style>
    html,
    body {
        height: 100%;
        margin: 0;
        scroll-behavior: smooth;
    }

    body {
        font-family: 'Roboto', sans-serif;
        color: #fff;
        background-color: #fff;
        position: relative; /* stacking context for overlay */
    }

    /* --- Global subtle background image --- */
   body::before {
    content: "";
    position: fixed;
    inset: 0;  /* shorthand for top/right/bottom/left: 0 */
    background-image: url("{% static 'images/5678.png' %}");
    background-size: cover;          /* fill screen, crop if needed */
    background-position: center;     /* keep centered */
    background-repeat: no-repeat;    /* prevent tiling */
    background-attachment: fixed;    /* keep fixed while scrolling */
    background-color: #2b0a3d;       /* fallback fill (deep purple, instead of black) */
    opacity: 0.9;                    /* adjust overlay visibility */
    pointer-events: none;            /* don't block clicks */
    z-index: 0;                      /* behind page content */
}

/* Mobile tweaks only */
/* ------------------ MOBILE (≤1024px) ------------------ */
/* =============== MOBILE (≤1024px) — single consolidated block =============== */
@media (max-width: 1024px) {

  /* --- feel less "zoomed in" on small screens --- */
  html { font-size: 15px; } /* was effectively larger on some pages */
  .container { padding: 1.25rem; } /* was 2rem */
  /* if you have a hero title/lead on the homepage: */
  .hero h1, .page-title { font-size: clamp(1.8rem, 6vw, 2.4rem); line-height: 1.15; }
  .hero p,  .lead       { font-size: clamp(1rem, 3.6vw, 1.2rem); line-height: 1.4; }

  /* --- background logo fill (no crazy zoom) --- */
  body::before{
    background-size: auto 100%;   /* fill height; avoids over-zoom */
    background-position: center top;
    background-repeat: no-repeat;
    background-color: #3B1373;    /* your brand background behind image */
    opacity: 0.9;
  }

  /* ---------------- NAVBAR (target real markup: <nav>, .nav-left, .nav-right) ---------------- */
  nav {
    position: sticky; top: 0; z-index: 1000;
    display: flex; align-items: center;
    justify-content: space-between;   /* split left/right automatically */
    background: #3B1373;
    min-height: 56px;
    padding: .6rem .75rem;
  }
  /* Link row (your left block) — scrollable so nothing gets cut off */
  nav .nav-left {
    flex: 1 1 auto;
    display: flex; gap: .75rem;
    overflow-x: auto;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  nav .nav-left::-webkit-scrollbar { display: none; }

  /* right side pinned properly */
  nav .nav-right {
    flex: 0 0 auto; 
    display: flex; align-items: center; gap: .5rem;
  }

  /* Individual links a touch tighter, readable */
  nav a{ font-size: .98rem; line-height: 1; text-decoration: none; }

  /* Language select pinned to the right, never overlaps links */
 nav .nav-right {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap: .5rem;
}
  /* ---------------- Event list/cards ---------------- */
  .event-grid{
    display: flex; flex-direction: column; align-items: center; gap: 1rem;
  }
  .event-card{
    width: min(92vw, 440px);
    margin: 0 auto; border-radius: 18px;
  }
  .event-card .poster{
    position: relative; width: 100%;
    padding-top: 125%;                 /* 4:5 poster-like */
    background-size: contain;          /* show full poster */
    background-repeat: no-repeat;
    background-position: center top;
    border-radius: 16px;
  }
  .event-card .event-title{ font-size: clamp(1.1rem, 2.8vw, 1.35rem); }
  .event-card .event-meta { font-size: .95rem; }

  .event-actions{
    display: grid; grid-template-columns: 1fr 1fr; gap: .6rem; margin-top: .75rem;
  }
  .event-actions .btn{
    width: 100%; padding: .55rem .75rem; font-size: .95rem; line-height: 1.2; border-radius: .75rem;
  }
  .event-card .badge, .event-card .status-pill{ transform: scale(.9); transform-origin: top right; }
  
}

/* =============== VERY SMALL (≤420px) =============== */
@media (max-width: 420px){
  nav a{ font-size: .9rem; }
  nav .nav-left{ gap: .6rem; margin-right: 7.5rem; }
  nav .nav-right select{ max-width: 120px; }
  .event-actions{ grid-template-columns: 1fr; }
  .event-card{ width: 94vw; }
  .event-card .poster{ padding-top: 130%; }
}

    nav,
    .container {
        position: relative;
        z-index: 1;
    }

    /* Navbar */
    nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 999;
        background-color: #3b1373;
        color: white;
        padding: 1em;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    nav a {
        color: white;
        text-decoration: none;
        margin-right: 20px;
        font-weight: bold;
    }

    nav .nav-left,
    nav .nav-right {
        display: flex;
        align-items: center;
    }

    nav .nav-right span {
        margin-left: 10px;
        font-weight: normal;
        font-size: 0.9em;
        color: #ddd;
    }

    .badge-circle {
        background-color: red;
        color: white;
        font-weight: bold;
        font-size: 10px;
        line-height: 1;
        padding: 2px 6px;
        border-radius: 999px;
        vertical-align: middle;
        display: inline-block;
        min-width: 16px;
        text-align: center;
        box-shadow: 0 0 0 2px #333;
    }

    /* Page content container */
       .container {
        max-width: 1200px;
        margin: 100px auto 40px auto; /* below navbar, centered */
        padding: 2em;

        /* make outer container transparent */
        background: transparent;
        box-shadow: none;

        z-index: 1;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #fff;
    }

    .heading-dark {
        color: #000 !important; /* force black text */
    }

    /* Inside white elements (cards, containers, forms, tables) → dark */
    .card,
    .card * {
        color: #333 !important;
    }

    .container.white-bg,
    .container.white-bg * {
        color: #333 !important;
    }

    hr {
        border: 0;
        border-top: 1px solid #ccc;
        margin: 2em 0;
    }

    /* ==== Unified buttons ==== */
    button,
    a.btn,
    a[class^="btn-"],
    a[class*=" btn-"],
    summary.btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: .35rem;
        min-width: 0;
        height: 32px;
        padding: 4px 10px;
        border-radius: 8px;
        border: 1px solid rgba(0, 0, 0, .18);
        color: #fff !important;
        font: 600 13px/1 'Roboto', sans-serif;
        text-decoration: none !important;
        cursor: pointer;
        transition: background .2s ease, border-color .2s ease, box-shadow .2s ease, transform .08s ease;
        box-shadow: 0 1px 2px rgba(0, 0, 0, .08);
        margin: 4px 6px;
    }

    button:active,
    a.btn:active,
    summary.btn:active {
        transform: translateY(1px);
    }

    /* Size modifiers */
    .btn-sm { height: 30px; padding: 3px 9px; font-size: 12.5px; }
    .btn-xs { height: 26px; padding: 2px 8px; font-size: 12px; }

    /* Variants */
    .btn-default { background: #444; border-color: #333; }
    .btn-default:hover { background: #1a1a1a; border-color: #1a1a1a; }

    .btn-edit { background: #007bff; border-color: #0056b3; }
    .btn-edit:hover { background: #0056b3; border-color: #00408d; }

    .btn-delete { background: #dc3545; border-color: #a71d2a; }
    .btn-delete:hover { background: #a71d2a; border-color: #7a1420; }

    .btn-green { background: #28a745; border-color: #1f7a36; }
    .btn-green:hover { background: #1f7a36; border-color: #175c29; }

    .btn-outline {
        background: transparent;
        color: #222 !important;
        border-color: rgba(0, 0, 0, .28);
    }
    .btn-outline:hover {
        background: rgba(0, 0, 0, .05);
        border-color: rgba(0, 0, 0, .38);
    }

    /* Tables */
    table { width: 100%; border-collapse: collapse; margin-top: 1em; }
    th, td { padding: 8px; border-bottom: 1px solid #ccc; }

    /* Centered popup messages */
    #messages-container {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2000;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
    }

    .message-popup {
        padding: 14px 22px;
        border-radius: 8px;
        font-size: 15px;
        color: #fff;
        font-weight: 500;
        box-shadow: 0 4px 14px rgba(0,0,0,0.25);
        animation: fadeIn 0.4s ease, fadeOut 0.4s ease 3.5s forwards;
        position: relative;
        min-width: 260px;
        text-align: center;
    }

    .message-popup.success { background: #28a745; }
    .message-popup.error   { background: #dc3545; }
    .message-popup.warning { background: #ffc107; color: #333; }
    .message-popup.info    { background: #17a2b8; }

    .message-popup .close-btn {
        position: absolute;
        top: 6px;
        right: 10px;
        font-weight: bold;
        cursor: pointer;
        font-size: 18px;
    }

    table {
    background: #fff;           /* white background */
    color: #333;                /* dark text inside */
    border-radius: 8px;         /* optional rounded corners */
    overflow: hidden;           /* keep radius clean */
    box-shadow: 0 2px 6px rgba(0,0,0,0.1); /* subtle shadow */
}

/* Keep header row styled */
    table thead th {
        background: #f8f9fa;   /* light gray for contrast */
        color: #333;
        font-weight: 600;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translate(-50%, -60%); }
        to   { opacity: 1; transform: translate(-50%, -50%); }
    }
    @keyframes fadeOut {
        to { opacity: 0; transform: translate(-50%, -40%); }
    }
</style>



    {% block extra_styles %}{% endblock %}
</head>

<body>
    <nav>
        <div class="nav-left">
            {% if user.is_authenticated %}
            {% if user.username|slice:":5" == "judge" %}
            <!-- Judge: only show logout -->
            <a href="{% url 'logout' %}">{% trans "Logout" %}</a>

            {% elif user.is_superuser %}
            <!-- Admin -->
            <a href="{% url 'club_dashboard' %}">{% trans "Clubs" %}</a>
            <a href="{% url 'event_list' %}">{% trans "Events" %}</a>

            <a href="{% url 'pending_club_requests' %}" class="pending-club-link" style="position: relative;">
                {% trans "Pending Clubs" %}
                {% if clubs_pending_count > 0 %}
                <span class="badge-circle">{{ clubs_pending_count }}</span>
                {% endif %}
            </a>
            <a href="{% url 'logout' %}">{% trans "Logout" %}</a>

            {% else %}
            <!-- Regular club user -->
            <a href="{% url 'club_dashboard' %}">{% trans "My Club" %}</a>
            <a href="{% url 'list_dancers' %}">{% trans "Dancers" %}</a>
            <a href="{% url 'event_list' %}">{% trans "Events" %}</a>
            <a href="{% url 'logout' %}">{% trans "Logout" %}</a>
            {% endif %}
            {% else %}
            <!-- Public/anonymous -->
            <a href="{% url 'home' %}">{% trans "Home" %}</a>
            <a href="{% url 'login' %}">{% trans "Login" %}</a>
            <a href="{% url 'register_club' %}">{% trans "Register Club" %}</a>
            <a href="{% url 'event_list_public' %}">{% trans "Events" %}</a>
            <a href="#">{% trans "Contact" %}</a>
            {% endif %}
        </div>

        <div class="nav-right">
            <!-- Language switcher -->
           <form action="{% url 'set_language' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <select name="language" onchange="this.form.submit()" style="margin-right: 10px;">
                {% get_current_language as LANGUAGE_CODE %}
                {% get_available_languages as LANGUAGES %}
                {% for lang_code, lang_name in LANGUAGES %}
                    <option value="{{ lang_code }}" {% if lang_code|lower == LANGUAGE_CODE|lower %}selected{% endif %}>
                        {{ lang_name }}
                    </option>
                {% endfor %}
            </select>
        </form>


            {% if user.is_authenticated %}
            <span>{% trans "Logged in as: " %}{{ user.username }}</span>
            {% endif %}
        </div>
    </nav>

    {% if messages %}
    <div id="messages-container">
    {% for message in messages %}
    <div class="message-popup {{ message.tags }}">
        {{ message }}
        <span class="close-btn" onclick="this.parentElement.style.display='none';">×</span>
    </div>
    {% endfor %}
    </div>
    {% endif %}


    <div class="container">
        {% block content %}{% endblock %}
        {% block extra_scripts %}{% endblock %}
    </div>
</body>

<script>
  // Auto-hide after 4 seconds
  document.addEventListener("DOMContentLoaded", () => {
    setTimeout(() => {
      document.querySelectorAll(".message-popup").forEach(el => el.style.display = "none");
    }, 4000);
  });
</script>

</html>