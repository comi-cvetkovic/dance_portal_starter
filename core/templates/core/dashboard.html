{% extends 'core/base.html' %}
{% load i18n %}
{% block title %}Dashboard | Dance Portal{% endblock %}

{% block content %}
    {% if user.is_superuser %}

    <h2>{% trans "All Dance Clubs" %}</h2>
    <table>
        <thead>
            <tr>
                <th>{% trans "Club Name" %}</th>
                <th>{% trans "Country" %}</th>
                <th>{% trans "City" %}</th>
                <th>{% trans "Phone" %}</th>
                <th>{% trans "Representative" %}</th>
                <th>{% trans "Email" %}</th>
                <th>{% trans "Password" %}</th>
                <th>{% trans "Actions" %}</th>
            </tr>
        </thead>
        <tbody>
            {% for club in clubs %}
            <tr>
                <td>{{ club.club_name }}</td>
                <td>{{ club.get_country_display }}</td>
                <td>{{ club.city }}</td>
                <td>{{ club.phone_number }}</td>
                <td>{{ club.representative_name }}</td>
                <td>{{ club.user.username }}</td>
                <td>{{ club.raw_password }}</td>
                <td>
                    <form method="get" action="{% url 'admin_list_dancers' club.id %}" style="display:inline;">
                        <button type="submit" class = "btn-default">{% trans "Manage Dancers" %}</button>
                    </form>
                    <form method="get" action="{% url 'edit_club' club.id %}" style="display:inline;">
                        <button type="submit" class = "btn-edit">{% trans "Edit Club" %}</button>
                    </form>
                    <form method="get" action="{% url 'delete_club' club.id %}" style="display:inline;">
                        <button type="submit" class = "btn-delete">{% trans "Delete Club" %}</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if events %}
    <h3 style="margin-top: 2em;">{% trans "Manage Start Lists" %}</h3>
    <ul>
        {% for event in events %}
        <li>
            {{ event.name }} ({{ event.city }} – {{ event.date }})
            <form method="get" action="{% url 'manage_start_list' event.id %}" style="display:inline;">
                <button type="submit" class = "btn-default">{% trans "Manage Start List" %}</button>
            </form>
        </li>
        {% endfor %}
    </ul>
    {% endif %}

    {% else %}
    <h1>Welcome, {{ club.representative_name }}</h1>

    <ul>
        <li><strong>{% trans "Club Name:" %}</strong> {{ club.club_name }}</li>
        <li><strong>{% trans "Country:" %}</strong> {{ club.get_country_display }}</li>
        <li><strong>{% trans "City:" %}</strong> {{ club.city }}</li>
        <li><strong>{% trans "Email:" %}</strong> {{ club.user.email }}</li>
        <li><strong>{% trans "Phone:" %}</strong> {{ club.phone_number }}</li>
    </ul>

    <form method="get" action="{% url 'edit_own_club' %}">
        <button type="submit" class = "btn-edit">{% trans "Edit Club Details" %}</button>
    </form>

    {% if events %}
    <h3>Start Lists</h3>
    <ul>
        {% for event in events %}
        <li>
            {{ event.name }} ({{ event.city }} – {{ event.date }})
            <form method="get" action="{% url 'start_list' event.id %}" style="display:inline;">
                <button type="submit" class = "btn-default">{% trans "View Start List" %}</button>
            </form>
        </li>
        {% endfor %}
    </ul>
    {% endif %}
    {% endif %}
{% endblock %}


